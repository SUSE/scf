---
name: register-nfs-persi

description: Uses the cf CLI to configure the nfs service brokers

packages:
  - cli
  - ruby-2.3
  - service-registration-utils

templates:
  post-start.erb: bin/post-start

properties:
  cf.insecure_api_url:
    description: The cloudcontroller's API endpoint (without TLS)
  scf.uaa.internal-url:
    description: URL to UAA that can be accessed before the cluster's domain is setup
  ssl.skip_cert_verify:
    description: True for insecure connections
  uaa.clients.scf_auto_config.secret:
    description: The secret for the UAA client to set up proxies
  cf_mysql.external_host:
    description: 'Host address of the service broker'
  cf_mysql.broker.protocol:
    description: 'Protocol (http/https) provided to the Cloud Controller when registering/de-registering the broker'
    default: https
  cf_mysql.broker.port:
    description: 'Port for the service broker'
    default: 443
  cf_mysql.broker.auth_username:
    description: 'Basic Auth username for the service broker'
    default: admin
  cf_mysql.broker.auth_password:
    description: 'Basic Auth password for the service broker'
  cf_mysql.mysql.port:
    description: 'Port used by the service broker and bound applications to reach the service'
    default: 3306
  nfsbroker.url:
    description: 'Internal URL of the Persi NFS broker'
  nfsbroker.username:
    description: "basic auth username to verify on incoming Service Broker requests"
    default: "admin"
  nfsbroker.password:
    description: "basic auth password to verify on incoming Service Broker requests"
